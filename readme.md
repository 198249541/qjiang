# Q-Jiang 自动化工具

这是一个用于自动化操作 Q-Jiang 游戏的 Python 工具集，包含多种功能模块，支持多账号管理和 Web 界面操作。

## 功能特性

### 核心功能
- **多账号管理**：支持多个游戏账号同时运行
- **自动登录**：自动登录并保存 token 信息
- **好友系统**：自动处理好友申请、资源互赠
- **日常任务**：自动领取日常任务奖励
- **邮件系统**：自动处理邮件附件和抽奖邮件
- **签到系统**：每月自动签到领取奖励
- **市场管理**：自动征收市场铜钱
- **武将系统**：酒馆招募、训练武将管理
- **领地资源**：自动召回超时占领资源
- **关卡战斗**：支持自定义关卡挑战

### Web 管理界面
- **用户端**：账号注册、任务执行、实时日志
- **管理端**：账号管理、全局日志监控、定时任务

## 项目结构

```
q-jiang/
├── main.py              # 主程序入口
├── login.py             # 登录模块
├── friend.py            # 好友系统
├── gift.py              # 资源赠送
├── daily_tasks.py       # 日常任务
├── email_manager.py     # 邮件管理
├── sign_in.py           # 签到系统
├── market.py            # 市场管理
├── home_copper.py       # 守家铜币
├── generalCard.py       # 武将卡牌
├── summonCard.py        # 武将召唤
├── landResources.py     # 领地资源
├── customs_battle.py    # 关卡战斗
├── app.py               # Web 应用
├── scheduler.py         # 定时任务
└── accounts.json        # 账号配置文件
```

## 安装与配置

### 1. 安装依赖模块：
```bash
pip install requests flask
```

所需Python模块列表：
- `requests` - 用于HTTP请求
- `flask` - 用于Web界面
- `werkzeug` - Flask的依赖，用于密码哈希处理

### 2. 配置账号信息：
创建 `accounts.json` 文件：
```json
[
  {
    "id": 1,
    "tel": "手机号1",
    "pwd": "密码1"
  },
  {
    "id": 2,
    "tel": "手机号2", 
    "pwd": "密码2"
  }
]
```

## 使用方法

### 命令行模式
```bash
python main.py
```

### Web 界面模式
```bash
python app.py
```
- 用户端访问：http://localhost:5000
- 管理端访问：http://localhost:5001

## 模块说明

### 好友系统 (`friend.py`)
- 自动同意好友申请
- 批量向好友索要资源
- 自动赠送别人索要的资源
- 自动领取好友赠送的资源

### 武将管理 (`generalCard.py`, `summonCard.py`)
- 酒馆武将招募
- 武将训练管理
- 自动训练空闲武将

### 邮件系统 (`email_manager.py`)
- 自动领取邮件附件
- 关卡抽奖邮件处理
- 自动删除已领取和过期邮件

### 日常任务 (`daily_tasks.py`)
- 获取日常任务列表
- 自动领取可领取任务奖励

### 领地资源 (`landResources.py`)
- 获取领地资源信息
- 自动召回超时占领资源

## 定时任务

系统内置定时任务，每小时自动执行所有账号的日常任务。

## 注意事项

1. 请妥善保管 `accounts.json` 文件，包含账号敏感信息
2. 建议在稳定的网络环境下运行
3. 遵守游戏规则，合理使用自动化功能
4. 如遇异常情况，请查看日志进行排查

## 更新日志

定期更新以适配游戏接口变化，建议保持最新版本使用。

## 免责声明

本工具仅供学习交流使用，请合理使用，避免对游戏服务器造成过大压力。使用本工具造成的任何后果由使用者自行承担。